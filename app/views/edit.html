<md-sidenav class="md-sidenav-left md-whiteframe-z2" md-component-id="left"  md-is-locked-open="'true'">
  <md-content layout-padding>
    <h3>{{editor.exam.course}} - {{editor.exam.session}}</h3>
    <div ui-tree="editor.examMenuOptions">
      <ol ui-tree-nodes="" ng-model="editor.exam.sections" data-type="section">
        <li class="section-menu" ng-repeat="section in editor.exam.sections" ng:init="parentIndex = $index" ui-tree-node>
          <div ui-tree-handle>
            {{section.title}}
          </div>
          <ol ui-tree-nodes="" ng-model="section.questions" data-type="question">
            <li class="question-menu" ng-repeat="question in section.questions" ui-tree-node>
              <div ui-tree-handle>
                <strong>Question {{editor.getConsecutiveIndex(parentIndex, $index)}}</strong>
                <em>{{question.content | limitTo: 30}}...</em>
              </div>
            </li>
          </ol>
        </li>
      </ol>
    </div>
  </md-content>
</md-sidenav>
<md-content flex layout-padding  class="no-background">





  <h2><input ng-model="editor.exam.course"> - <input ng-model="editor.exam.session"></h2>

<md-button class="md-raised" ng-click="editor.preview()">Preview</md-button>
<md-button class="md-raised" ng-click="editor.print()">Print</md-button>
<img ng-src="{{editor.pageSrc(p)}}" ng-repeat="p in editor.preview.pages"/>

  <div class="section" ng-repeat="section in editor.exam.sections | filter: {'title': 'vues'}">
    <md-button class="md-warn" ng-click="editor.removeSection(section)"><md-icon class="mdi-delete"></md-icon></md-button>
    <md-toolbar>
      <div class="md-toolbar-tools">
      </div>
    </md-toolbar>
<!-- TODO: support multi column display-->
		<div>
        <!-- TODO: support display of isNumbered-->
        <input type="text" ng-model="section.title"/>
      <md-select placeholder="Level" ng-model="ctrl.userState">
        <md-option ng-repeat="(key, value) in {'Level 1':'section', 'Level 2':'subsection', 'Level 3':'subsubsection'}" value="{{value}}">{{key}}</md-option>
      </md-select>
      <md-icon class="mdi-format-list-numbers"></md-icon>
      <md-checkbox ng-model="section.isNumbered">Show number</md-checkbox>
      <md-icon class="mdi-file-document"></md-icon>
      <md-checkbox ng-model="section.isSectionTitleVisibleOnAMC">Show in separate answer sheet</md-checkbox>
      <md-icon class="mdi-shuffle"></md-icon>
      <md-checkbox ng-model="section.shuffle">Shuffle questions</md-checkbox>
      <!-- TODO columns?      ng-model="section.columns" -->
      <md-icon class="mdi-view-list"></md-icon>
      <md-icon class="mdi-view-module"></md-icon>
      <md-icon class="mdi-settings"></md-icon>
      <md-icon class="mdi-eye"></md-icon>
		</div>
<!-- TODO disable question?/section paginate-->

    <my-rich-text-editor ng-model="section.content"></my-rich-text-editor>

    <div class="question" ng-class="{'layout-horizontal': question.layout == 'HORIZONTAL'}" ng-repeat="question in section.questions">
        <button class="block-remove btn" ng-click="block.removeQuestion(question)"><i class="icon-trash"></i></button>
        <h3><i class="icon-large icon-warning-sign invalid" ng-hide="isValid(question)" title="Question not valid! Check correct count."></i> Question <span class="counter"></span>
			       <md-icon class="mdi-message"></md-icon>
             <md-icon class="mdi-message-text"></md-icon>
             <md-icon class="mdi-forum"></md-icon>
             <input type="checkbox" id="id{{question.id}}" ng-model="question.type"  ng-true-value="2" ng-false-value="1" class="hide"/><label title="single answer or multiple answers" for="id{{question.id}}" class="icon-large checkbox-icon question-type"></label>
             <input type="checkbox" id="idl{{question.id}}" ng-model="question.layout" class="hide"/><label title="answer layout for this question horizontal|vertical" for="idl{{question.id}}" class="icon-large checkbox-icon question-layout"></label>
             <md-icon class="mdi-dots-horizontal"></md-icon>
             <md-icon class="mdi-dots-vertical"></md-icon>
             <md-icon class="mdi-alert"></md-icon>
             <md-icon class="mdi-check"></md-icon>
             <md-icon class="mdi-close"></md-icon>
             <md-icon class="mdi-menu"></md-icon>
             <md-icon class="mdi-plus"></md-icon>
             <md-icon class="mdi-upload"></md-icon>
             <md-icon class="mdi-download"></md-icon>
             <md-icon class="mdi-file-image-box"></md-icon>
             <md-icon class="mdi-file-xml"></md-icon>
             <md-icon class="mdi-format-italic"></md-icon>
             <md-icon class="mdi-format-bold"></md-icon>
             <md-icon class="mdi-printer"></md-icon>
			  </h3>
        <my-rich-text-editor ng-model="question.content"></my-rich-text-editor>
        <div ng-repeat="answer in question.answers" class="answer">
            <input id="id{{answer.id}}" type="checkbox" ng-model="answer.correct"><label for="id{{answer.id}}" class="icon-large"></label> <my-rich-text-editor ng-model="answer.content"></my-rich-text-editor> <button ng-click="question.removeAnswer(answer)" class="btn btn-link"><i class="icon-trash"></i></button>
        </div>
        <div class="add-answer"><button ng-click="question.addAnswer()" class="btn"><i class="icon icon-plus"></i> answer</button></div>
    </div>
    <div class="add-question"><button ng-click="block.addQuestion()" class="btn"><i class="icon icon-plus"></i> question</button></div>
  </div>

  <div class="add-section">
    <button ng-click="exam.addBlock()" class="btn"><i class="icon icon-plus"></i> section</button>
  </div>
</md-content>
<!--
    preview
    option-> template list
    custom template
    preview files, edit files -> disable edit
    upload custom project -> disable edit
    print nb series
    d/l zipped?
  -->